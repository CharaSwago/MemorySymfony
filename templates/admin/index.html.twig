{% extends 'base.html.twig' %}

{% block title %}Panneau d'Administration{% endblock %}

{% block body %}
<div class="bg-gray-900 text-gray-200 min-h-screen flex flex-col">
    
    <main class="flex-grow">
        <div class="max-w-6xl mx-auto p-6">

            <div class="bg-gray-700 text-gray-200 p-6 rounded-lg shadow-lg">
                <h1 class="text-3xl font-semibold mb-4">Bonjour {{ user.username }} ! ✅</h1>

                <div class="mb-6">
                    <a href="{{ path('app_admin_add_patient') }}" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition duration-300 ease-in-out ml-4">
                        Ajouter un patient
                    </a>
                </div>

                <h2 class="text-xl font-semibold mb-4">Liste des Patients</h2>
                
                <!-- Tableau des utilisateurs -->
                <div class="overflow-x-auto">
                    <table class="min-w-full bg-gray-800 text-gray-200 rounded-lg shadow-lg overflow-hidden">
                        <thead>
                            <tr class="bg-gray-700">
                                <th class="py-3 px-4 text-left">#</th>
                                <th class="py-3 px-4 text-left">Nom d'utilisateur</th>
                                <th class="py-3 px-4 text-left">Email</th>
                                <th class="py-3 px-4 text-left">Édition</th>
                                <th class="py-3 px-4 text-left">Suppression</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for patient in user.patients %}
                            <tr class="border-b border-gray-600">
                                <td class="py-2 px-4">{{ loop.index }}</td>
                                <td class="py-2 px-4">{{ patient.username }}</td>
                                <td class="py-2 px-4">{{ patient.email }}</td>
                                <td class="py-2 px-4">
                                    <button class="bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600 transition duration-300 ease-in-out">
                                        Éditer
                                    </button>
                                </td>
                                <td class="py-2 px-4">
                                    <form method="post" action="{{ path('app_admin_remove', {'id': patient.id}) }}" class="inline">
                                        <button class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 transition duration-300 ease-in-out" type="submit">
                                            Supprimer
                                        </button>
                                    </form>
                                </td>
                            </tr>
                            {% else %}
                            <tr>
                                <td colspan="5" class="py-2 px-4 text-center text-gray-400">Aucun patient trouvé.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </main>


    <footer class="bg-gray-800 py-4">
        <div class="max-w-6xl mx-auto text-center text-gray-400">
            <p>&copy; 2024 MemorEase. Tous droits réservés.</p>
            <p><a href="#" class="text-blue-400 hover:underline">Contactez-nous</a></p>
        </div>
    </footer>
</div>
{% endblock %}
